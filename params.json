{"name":"lua-iis-module","tagline":"It brings the power of Lua scripting in your IIS.","body":"lua-iis-module\r\n================\r\n\r\nIt brings the power of Lua scripting in your IIS.\r\n\r\n## Install\r\n\r\nDownload MSI file from following page. (x86 & x64 version)\r\n\r\nhttps://github.com/shibayan/lua-iis-module/releases\r\n\r\n## Configuration\r\n\r\n### Web.config\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<configuration>\r\n  <system.webServer>\r\n    <iislua>\r\n      <beginRequest scriptPath=\"C:\\inetpub\\beginrequest.lua\" />\r\n      <mapPath scriptPath=\"C:\\inetpub\\mappath.lua\" />\r\n    </iislua>\r\n  </system.webServer>\r\n</configuration>\r\n```\r\n\r\n## Usage\r\n\r\n### Return status code\r\n\r\n```lua\r\niis.exit(404)\r\n```\r\n\r\n### Redirect\r\n\r\n```lua\r\niis.redirect(\"http://buchizo.wordpress.com/\")\r\n```\r\n\r\n### Refuse http method\r\n\r\n```lua\r\nif iis.req.http_method() ~= \"POST\" then\r\n    iis.exit(405)\r\nend\r\n```\r\n\r\n### Cross domain access control\r\n\r\n```lua\r\nreq_headers = iis.req.get_headers()\r\n\r\nif req_headers[\"Origin\"] ~= nil then\r\n    iis.resp.set_header(\"Access-Control-Allow-Origin\", req_headers[\"Origin\"])\r\nend\r\n```\r\n\r\n### Rewrite to other url\r\n\r\n```lua\r\nif iis.req.get_url() == \"/\" then\r\n   iis.exec(\"/iisstart.htm\")\r\nend\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}